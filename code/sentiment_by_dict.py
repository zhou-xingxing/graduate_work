# -*- coding: utf-8 -*-
"""
Created on Tue Mar 31 18:46:50 2020

@author: lenovo
"""

#åŸºäºè¯å…¸çš„æƒ…æ„Ÿåˆ†æ
import jieba
import os,time,csv
from pyltp import Segmentor
from data_cleaning import *
from langconv import *
import pandas as pd


# åŠ è½½è‡ªå®šä¹‰è¯å…¸
jieba.load_userdict(r'../dict/self_dict.txt')


LTP_DATA_DIR = r'../ltp_data_v3.4.0/ltp_data_v3.4.0'  # ltpæ¨¡å‹ç›®å½•çš„è·¯å¾„
cws_model_path = os.path.join(LTP_DATA_DIR, 'cws.model')  # åˆ†è¯æ¨¡å‹è·¯å¾„ï¼Œæ¨¡å‹åç§°ä¸º`cws.model`
segmentor = Segmentor()  # åˆå§‹åŒ–å®ä¾‹
segmentor.load_with_lexicon(cws_model_path, r"../dict/self_dict.txt")  # åŠ è½½æ¨¡å‹ï¼Œç¬¬äºŒä¸ªå‚æ•°æ˜¯æ‚¨çš„å¤–éƒ¨è¯å…¸æ–‡ä»¶è·¯å¾„

pos_dict=pd.read_csv(r'../dict/self_positive_dict.txt',header=None)
pos_dict=pos_dict[0].tolist()

neg_dict=pd.read_csv(r'../dict/self_negative_dict.txt',header=None)
neg_dict=neg_dict[0].tolist()

not_dict=pd.read_csv(r'../dict/self_not.txt',header=None)
not_dict=not_dict[0].tolist()

with open("../dict/self_degree.txt",'r',encoding='utf-8') as f:    
    degree=eval(f.read()) #æŠŠå­—å…¸è½¬åŒ–ä¸ºstr 

degree_most=degree['most']
degree_more=degree['more']
degree_less=degree['less']
degree_least=degree['least']

print('æ­£é¢æƒ…æ„Ÿè¯:',len(pos_dict))
print('è´Ÿé¢æƒ…æ„Ÿè¯:',len(neg_dict))
print('å¦å®šè¯:',len(not_dict))
print('ç¨‹åº¦å‰¯è¯:',len(degree_most),len(degree_more),len(degree_less),len(degree_least))

#æ•°æ®æ¸…æ´—
def danmu_clean(sentence):
    with open(r"../dict/dyemot.txt", 'r')as f:
        emot_dict = eval(f.read())
        
    sentence=symbol_replace(sentence)
    sentence=tradition2simple(sentence)
    sentence=sim_replace(sentence)
    sentence=emoji_replace(sentence)
    
    return sentence


#jiebaåˆ†è¯
def jieba_word(sentence):
    seg_list = jieba.cut(sentence)
    seg_result = []
# å»å¤šä½™ç©ºæ ¼
    for i in seg_list:
        if i==' ':
            continue
        else:
            seg_result.append(i)
    
    return seg_result

#ltpåˆ†è¯
def ltp_word(sentence):
    seg_result = segmentor.segment(sentence)
    return list(seg_result)


#è®¡ç®—æƒ…æ„Ÿå¾—åˆ†    
def sentence_score(seg_result):
    pos_score=0
    neg_score=0
    
    for i in range(0,len(seg_result)):        
        if seg_result[i] in pos_dict:
#            print('pos:',seg_result[i])
            tmp=1
#            å‘å‰æŸ¥1-2ä¸ªè¯
            for j in [1,2]:
                if i-j<0:
                    break
#                æœ‰æ ‡ç‚¹è¯´æ˜å‰åæ— è”ç³»ï¼Œæå‰ç»“æŸ
                if seg_result[i-j]==',' or seg_result[i-j]=='.':
                    break
                else:
                    if seg_result[i-j] in not_dict:
                        tmp=tmp*-1
                        continue
                    elif seg_result[i-j] in degree_most:
                        tmp=tmp*1.75
                        continue
                    elif seg_result[i-j] in degree_more:
                        tmp=tmp*1.5
                        continue
                    elif seg_result[i-j] in degree_less:
                        tmp=tmp*0.75
                        continue
                    elif seg_result[i-j] in degree_least:
                        tmp=tmp*0.5
                        continue
            pos_score+=tmp
        elif seg_result[i] in neg_dict:
#            print('neg:',seg_result[i])
            tmp=1
#            å‘å‰æŸ¥1-2ä¸ªè¯
            for j in [1,2]:
                if i-j<0:
                    break
                if seg_result[i-j]==',' or seg_result[i-j]=='.':
                    break
                else:
                    if seg_result[i-j] in not_dict:
#                        è´Ÿé¢è¯è¢«å¦å®šè¯ä¿®é¥°è§†ä¸ºæ— æƒ…æ„Ÿæˆ–ç•¥å¾®æ­£å‘
                        tmp=tmp*0
                        continue
                    elif seg_result[i-j] in degree_most:
                        tmp=tmp*1.75
                        continue
                    elif seg_result[i-j] in degree_more:
                        tmp=tmp*1.5
                        continue
                    elif seg_result[i-j] in degree_less:
                        tmp=tmp*0.75
                        continue
                    elif seg_result[i-j] in degree_least:
                        tmp=tmp*0.5
                        continue
            neg_score+=tmp
    
    score=pos_score-neg_score
#    print('score',score)
#    å¦‚æœå¥å­æœ€åæœ‰å¹å·
    if  seg_result[-1]=='!':
        score*=1.5
    return score    
                           
                        
#è¾“å‡ºå•æ¡å¼¹å¹•æƒ…æ„Ÿåˆ†æç»“æœ                        
def sentiment_result(sentence):                

#    åªæœ‰åœ¨æµ‹è¯•å•æ¡å¼¹å¹•æ—¶æ‰éœ€è¦æ¸…æ´—
    sentence=danmu_clean(sentence)
#    ç‰¹æ®Šå¤„ç†ä¸¤ç§æƒ…å†µ
    if sentence=='???':
#        print('è´Ÿé¢')
        jieba_res=-1
        ltp_res=-1
        return (jieba_res,ltp_res)  
#        return jieba_res
    if sentence=='!!!':
#        print('æ­£é¢')
        jieba_res=1
        ltp_res=1
        return (jieba_res,ltp_res)  
#        return jieba_res
    if len(sentence)==0 or sentence==',' or sentence=='.':
#        print('ä¸­æ€§')
        jieba_res=0
        ltp_res=0
        return (jieba_res,ltp_res) 
#        return jieba_res
    
    
    jieba_list=jieba_word(sentence)
    ltp_list=ltp_word(sentence)
#    
#    print('jieba_list:',jieba_list)
#    print('ltp_list:',ltp_list)
#    
    sentiment_jieba=sentence_score(jieba_list)
    sentiment_ltp=sentence_score(ltp_list)
    
    if sentiment_jieba>0:
        print('jieba:','socre',sentiment_jieba,'class','æ­£é¢')
    elif sentiment_jieba<0:
        print('jieba:','socre',sentiment_jieba,'class','è´Ÿé¢')
    else:
        print('jieba:','socre',sentiment_jieba,'class','ä¸­æ€§')
        
    if sentiment_ltp>0:
        print('ltp:','socre',sentiment_ltp,'class','æ­£é¢')
    elif sentiment_ltp<0:
        print('ltp:','socre',sentiment_ltp,'class','è´Ÿé¢')
    else:
        print('ltp:','socre',sentiment_ltp,'class','ä¸­æ€§')    
    
    if sentiment_jieba>0:
        jieba_res=1
    elif sentiment_jieba<0:
        jieba_res=-1
    else:
        jieba_res=0
        
    if sentiment_ltp>0:
        ltp_res=1
    elif sentiment_ltp<0:
        ltp_res=-1
    else:
        ltp_res=0
    
    return (jieba_res,ltp_res)    
#    return sentiment_jieba

#æŒ‰æ—¶é—´æ®µåˆ¤æ–­æƒ…æ„Ÿ
def sentiment_fragment(danmu_list):
    sentiment_score_list=[]
    sentiment_pos_score=[]
    sentiment_neg_score=[]
    for i in danmu_list:
        score=sentiment_result(i)
        sentiment_score_list.append(score)
        if score>0:
            sentiment_pos_score.append(score)
        if score<0:
            sentiment_neg_score.append(score)
    num=len(sentiment_score_list)        
    avg=sum(sentiment_score_list)/num
#è¿”å›æƒ…æ„Ÿå€¼ç´¯ç§¯å’Œã€å¹³å‡å€¼ã€æ­£å‘å’Œã€è´Ÿå‘å’Œ
#    return (sum(sentiment_score_list),avg,sum(sentiment_pos_score),sum(sentiment_neg_score))
#è¿”å›æƒ…æ„Ÿå‡å€¼ã€æ­£é¢æƒ…æ„Ÿå‡å€¼ã€æ­£é¢å¼¹å¹•æ¯”ã€è´Ÿé¢æƒ…æ„Ÿå‡å€¼ã€è´Ÿé¢å¼¹å¹•æ¯”
    return  (avg,sum(sentiment_pos_score)/num,len(sentiment_pos_score)/num,sum(sentiment_neg_score)/num,len(sentiment_neg_score)/num)  



#â¤ï¸
#â¤ è¿™ä¸¤ç§çº¢å¿ƒä¸ä¸€æ ·   
#sentence="å®Œäº† å¸¦å°¼ç›èŠ‚å¥ æ»¡å˜´è·‘ç«è½¦ è€å¹²çˆ¹çš„ä¸¤ä¸ªå¤§é¹… æ¥äº† èµ¢äº† èŒç¥çœŸçš„èŒ å°±è¿™ æ ·çš„ å¤ªèœäº†"
#i=sentiment_result(sentence)
#print(i)
#    
#æµ‹è¯•å¼¹å¹•
def test_danmu():    
    test_data=pd.read_csv(r'../data/test300_result_verify.csv')
    print('æµ‹è¯•æ•°é‡ï¼š',len(test_data))
    jieba_flag=[]
    ltp_flag=[]
    start_time=time.clock()
    for index,row in test_data.iterrows():
        danmu=str(row['danmu'])
        jieba_res,ltp_res=sentiment_result(danmu)
    #    print(jieba_res,ltp_res)
        jieba_flag.append(jieba_res)
        ltp_flag.append(ltp_res)
    end_time=time.clock()
    print('æµ‹è¯•ç”¨æ—¶ï¼š',end_time-start_time)
    test_data['jieba']=jieba_flag
    test_data['ltp']=ltp_flag
    test_data.to_csv(r'../data/new_test300_result_verify.csv',index=None)
    
test_danmu()    
#
#æµ‹è¯•æ—¶é—´æ®µå¼¹å¹•
def test_danmu_frag():
#    è¿è¡Œ36ç§’
    data=pd.read_csv(r'../code/frag_cleaned_test_room911_20000.csv')
    time_group=data.groupby('fragment')    
    time_frag=[]
#    score_frag=[]
    avg_frag=[]
    pos_avg_frag=[]
    pos_pro_frag=[]
#    pos_frag=[]
#    neg_frag=[]
    start_time=time.clock()
    for gn,gl in time_group:
#        ä»¥æ¯ç»„ç¬¬ä¸€æ¡å¼¹å¹•æ—¶é—´ä¸ºåæ ‡å€¼
        time_frag.append(gl['time'].tolist()[0])
        avg,pos_avg,pos_pro=sentiment_fragment(gl['content'].tolist())
        
        avg_frag.append(avg)
        pos_avg_frag.append(pos_avg)
        pos_pro_frag.append(pos_pro)
    end_time=time.clock()
    print('æµ‹è¯•ç”¨æ—¶ï¼š',end_time-start_time)
    dic={'time_frag':time_frag,'avg_score':avg_frag,'pos_avg':pos_avg_frag,'pos_proportion':pos_pro_frag}
    senti_frag=pd.DataFrame(dic)
    senti_frag.to_csv(r'../code/new2_senti_frag_cleaned_test_room911_20000.csv',index=None)

#test_danmu_frag()

#ä¸ºæ—¶é—´æ®µåŠ ç‰¹å¾
def feature_danmu_frag():
#    170-180s
    data=pd.read_csv(r'../data/room36252/new_flagfeature_final_room36252danmu0318.csv') 
    avg_ls=[]
    pos_avg_ls=[]
    pos_prop_ls=[]
    neg_avg_ls=[]
    neg_prop_ls=[]
    start_time=time.clock()
    for index,row in data.iterrows():
#        print(row['danmu'],type(row['danmu']))
        avg,pos_avg,pos_prop,neg_avg,neg_prop=sentiment_fragment(eval(row['danmu']))
        
        avg_ls.append(avg)
        pos_avg_ls.append(pos_avg)
        pos_prop_ls.append(pos_prop)
        neg_avg_ls.append(neg_avg)
        neg_prop_ls.append(neg_prop)
    
    end_time=time.clock()
    print('æµ‹è¯•ç”¨æ—¶ï¼š',end_time-start_time)
    data['avg_score']=avg_ls
    data['pos_avg_score']=pos_avg_ls
    data['pos_proportion']=pos_prop_ls
    data['neg_avg_score']=neg_avg_ls
    data['neg_proportion']=neg_prop_ls
    
    data.to_csv(r'../data/room36252/new_flagfeature_final_room36252danmu0318.csv',index=None)
    
    
    
        
#feature_danmu_frag()

#test_list=['å“ˆå“ˆå“ˆ', 'qgè¿™ä¹ˆèœå›å»æ’ä½å§', 'çˆ±æ€æŒ‡æŒ¥', '???', '5ç§’çœŸç”·äººçš„æ—¶ä»£å·²ç»è¿‡å»,åœ¨è¿™ä¸ªç›´æ’­é—´å°±æ¥#æŒ‘æˆ˜666#', 'å“ˆå“ˆå“ˆ', 'å•Šå•Šå•Š', '666', 'æŒ‡æŒ¥é—®é¢˜å¤ªå¤šäº†', 'å“ˆå“ˆå“ˆ èˆ’æœäº†', 'çˆ±æ€å§', 'å“ˆå“ˆå“ˆ', 'æ€ç–¯äº†', 'çˆ±æ€æ˜¯æŒ‡æŒ¥', 'qgéƒ½å¾—è¿çº¿æŒ‡æŒ¥', 'è¿™...è¯­éŸ³,å¸¦æ··å“å•ŠğŸ˜‚', 'è¿™ä¸ªå›éŸ³å“ˆå“ˆå“ˆ', 'æ‰£gç°åœ¨æ€ä¹ˆå˜å¾—å¥½èœå‘€?', '???', 'çˆ±æ€', 'ä¹å¹´åœ¨heroæ˜æ˜¾1å°±æ˜¯æœ€èœçš„', 'çˆ±æ€æŒ‡æŒ¥', 'flyä¸çŸ¥é“åœ¨å¹²å˜›', 'ç»™æˆ‘æ­»!', 'ç°åœ¨qgçš„æŒ‡æŒ¥æ˜¯è®¸è¯ºå—?æ„Ÿè§‰æœ‰ç‚¹æ‡µ,ä¸çŸ¥é“è¯¥å¹²å˜›,å¾ˆè¢«åŠ¨', 'æ€äºº', 'é‚£ä¸ªæ˜¯æ•ˆåº”?', '???', 'çˆ±æ€æŒ‡æŒ¥', 'æ€äººæ€äºº', 'ç»™æˆ‘æ­»', 'çˆ±æ€', 'æˆ‘å‡‘', 'å•Šå•Šå•Š', 'è¯¶å˜›å“æ­»æˆ‘äº†', 'è¿™æ˜¯çˆ±æ€è¿˜æ˜¯ç¬‘å½±å•Š', 'ç»™æˆ‘æ€äºº', 'è¿™æ˜¯çˆ±æ€å‘¢å£°éŸ³ä¸æ˜¯ç¬‘å½±', 'è‚¥å“²åˆ«çœ‹äº†å­¦ä¸ä¼šçš„', 'å“ˆå“ˆå“ˆ', 'å›éŸ³çœŸå¤§', 'çˆ±æ€æŒ‡æŒ¥', 'ä¸»æ’­ä¸è¦é€—', 'çˆ±æ€æŒ‡æŒ¥çš„', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆå˜', 'ç»™æˆ‘æ­»', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ,ç»™æˆ‘æ­»,å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'agçš„æŒ‡æŒ¥å¼ºå¤ªå¤šäº†', 'äº”ä¸ªäººçš„æ¸¸æˆ åˆ«æ€ªæ¥æ€ªå»äº†', 'ç»™æˆ‘æ­»å“ˆå“ˆå“ˆ', 'è®©æˆ‘æ­»?', 'å“ˆå“ˆå“ˆ', 'çˆ±æ€æŒ‡æŒ¥', 'æˆ‘åœ¨#æŒ‘æˆ˜666#ä¸­æœ€å¥½æˆç»©æ˜¯6.61ç§’,ä½ èƒ½è¶…è¶Šæˆ‘å—?', 'çˆ±æ€å§', 'è¿˜æ˜¯çˆ±æ€å£°éŸ³å¤š', 'ç»™æˆ‘æ­»', 'æˆ‘å‹’ä¸ªå»', 'å“ˆå“ˆå“ˆ', 'è¿™ä¸ªå£°éŸ³æ„Ÿè§‰éš”çš„å¥½è¿œå“ˆå“ˆå“ˆ', 'è¿™ä¸ªè¯­éŸ³ æ€ä¹ˆè¿™ä¹ˆæç¬‘', 'ç»™æˆ‘æ­»', 'ç¬‘æ­»', 'æ€äººæ€äºº', 'å“ˆå“ˆå“ˆ', '???', '???', 'ç»™æˆ‘æ­»!', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'çˆ±æ€æŒ‡æŒ¥çš„', 'æˆ‘çœ‹qgå•¥éƒ½ç¼º,ç¼ºæ•™ç»ƒç¼ºæŒ‡æŒ¥ç¼ºè¾…åŠ©', 'å›°äº†ç´¯äº†,å°±æ¥ä¸€æŠŠç´§å¼ åˆºæ¿€çš„#æŒ‘æˆ˜666#,ä¸€å±€æç¥é†’è„‘,ä¸¤å±€æ°¸ä¸ç–²åŠ³!', 'çˆ±æ€å¤šä¸€ç‚¹', 'çˆ±æ€æ˜¯ä¸»æŒ‡æŒ¥', 'flyå¤ªæƒ¨äº†', 'çˆ±æ€', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'çˆ±æ€', 'è°æŒ‡æŒ¥', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'ç»™æˆ‘æ­»', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'ç»™æˆ‘æ­»å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å¾ˆä¸é”™666å•Š', 'å“ˆå“ˆå“ˆ', 'æ€äºº', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆæœ‰ç§æ’ä½çš„æ„Ÿè§‰', 'å•Šå•Šå•Š!ï½ï½', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å“ªä¸ªæ˜¯ç¬‘å½±', 'å“ˆå“ˆå“ˆè¿™ä¸ªè¡¨æƒ…', 'å“ˆå“ˆå“ˆ4', 'å“ˆå“ˆå“ˆ', 'ç»™æˆ‘æ€äºº', 'ç¬‘æ­»æˆ‘äº†', 'å“ˆå“ˆå“ˆ', 'ç»™æˆ‘æ­»', 'å“ˆå“ˆå“ˆ', 'æ”¶äº†?', 'è®¸è¯ºé•¿å¾—ä¹Ÿè¿˜å¯ä»¥', 'é¸­è¯º', 'å“ˆå“ˆå“ˆå•Šå“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'éš”ç€å¼€é»‘å‘¢', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'æ€äººæ€äºº', 'å¤ªç‹ äº†', 'ä¸»æ’­æ˜¯çœŸçš„é¡¶', 'ç»™ğŸ‘´ğŸ»æ­»!âœŒğŸ»', 'å“ˆå“ˆå“ˆ', 'å•Š', '43ä¼¤å®³', 'æ±Ÿè¥¿è€è¡¨', 'æ ‡é¢˜é”™äº†å§', 'å¥½å¯çˆ±å•Šå•Šå•Š', 'æ€äººæ€äºº', 'æ€äººå°±å®Œäº†', 'é¡¶çº§å°„æ‰‹ä¸€è¯º', 'æ€äººæ€äºº', 'åˆºç—›ä¸é…èµ¢', 'nice?', 'ä¸€è¯ºï¼šæ€äººæ€äººå“ˆå“ˆå“ˆ', 'ä¸€è¯º!', 'å“ˆå“ˆå“ˆ', 'å¼€ç«å¼€ç«å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å¤ªå¼ºäº†', 'ç»™æˆ‘æ­»', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å•Šå•Šå•Šæ€ç–¯äº†å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ  å¥‡å¥‡æ€ªæ€ªçš„å«å£°', 'å“ˆå“ˆå“ˆ', 'æ€äºº,ç»™æˆ‘æ€äºº', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'è‰¾æ–¯', 'å“ˆå“ˆå“ˆ', 'å—·å—·!', 'å“ˆå“ˆå“ˆ', 'çˆ½', 'è¯´ç™½äº†,qgçš„æŒ‡æŒ¥å°±æ˜¯ä¸è¡Œ', 'ç»™æˆ‘æ­»!æ€äºº!', 'å“ˆå“ˆå“ˆ', '666', 'ç»™æˆ‘æ­»', 'è¿™ä¹Ÿå¤ªæ¬¢ä¹äº†', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'ä¸€è¯ºnb', 'è¿™ä¸ªè¯­éŸ³å›æ”¾å£°éŸ³å¥½å°', 'ç»™æˆ‘æ­»', 'å“ˆå“ˆå“ˆ', 'ä¸»æ’­æ˜¯çœŸçš„é¡¶', 'å“ˆå“ˆå“ˆå¼€é»‘å‘¢', '42...', 'çŒ›ç”·æ€’å¼', 'å¥½ç¨³', 'æˆ‘é€', 'èˆ’æœ', 'è¢«è™å“­äº†,è¯·æ±‚å¤§ä½¬æ”¯æ´#æŒ‘æˆ˜666#', '42.5å¤ªææ€–äº†', 'æ€äººæ€äºº', 'ä»–ä»¬åœ¨å“ªé‡Œæ‰“çš„æ¯”èµ›', 'å“ˆå“ˆå“ˆ', 'mua', 'å¬ä¸æ¸…', 'é¢„æ„Ÿqgå®˜åšæ²¦é™·äº†', 'å“ˆå“ˆå“ˆ', 'çˆ±æ€', 'ä¸€è¯ºæ£’', 'ä¸€è„¸æ‡µé€¼å“ˆå“ˆå“ˆ', 'ä¸€è¯ºä¸ªæ¸£ç”·', 'å“ˆå“ˆå“ˆ', 'ä¸€è¯º', '...', 'ä¹±', 'qgè¾“åœ¨åå­—', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'æ€ä¹ˆè¿™ä¹ˆæç¬‘', 'å¤ªç‹ äº†', 'å¬ä¸æ¸…æ˜¯è°...', 'å“ˆå“ˆå“ˆ', '6å“¥è¯´çš„è®©æˆ‘æ­»?', 'å¥½å¯çˆ±', 'å“ˆå“ˆå“ˆ,ç»™æˆ‘æ­»!å“ˆå“ˆå“ˆ', 'agæ‰“ç ´çš„é­”å’’è¿˜å°‘å—?', 'å“ˆå“ˆå“ˆä¸€è¯º', 'å¥ˆæ–¯', 'è¢«è™å“­äº†,è¯·æ±‚å¤§ä½¬æ”¯æ´#æŒ‘æˆ˜666#', 'æˆ‘ä¸€è¯ºå¼Ÿå¼Ÿ', 'åˆºç—›è¿˜å¾—æ‰“é‡è¿˜å¾—å°„æ‰‹åªæœ‰ä¸€ä¸ªåˆºç—›', 'å¤ªç‹‚äº†', 'å…ˆæ€äºº', 'å“ˆå“ˆå“ˆ', 'è¿™ä¸ªçœ¼ç¥', '3ï¼0å¸¦èµ°', 'ç»™æˆ‘æ­»', 'å“ˆå“ˆå“ˆ', 'ç¬‘æ­»æˆ‘äº†', 'äº²äº²ä¸€è¯º', 'çˆ±æ€æŒ‡æŒ¥', 'å•Šå•Šå•Š', 'ç»™æˆ‘æ­»å“ˆå“ˆå“ˆ,', 'ç»™æˆ‘æ­»', 'æ€äººæ€äººå“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'åƒç½‘å§', 'äº¤æµæœ‰ç‚¹ä¹±', 'å¾å¿…æˆ', 'ç¬‘æ­»æˆ‘äº†å“ˆå“ˆå“ˆ', 'ç»™æˆ‘æ€', 'æ€äººæ€äºº', 'yeeeå“ˆå“ˆå“ˆ', '666', 'æ€', 'å“¦å“¦', 'ç»™æˆ‘æ­»', 'æ€ä¹ˆæ²¡æœ‰å¤´', 'è¯ºå´½!', 'æˆ‘è§‰å¾—åº”è¯¥æ‰“èŒèŠ½çš„', 'å“ˆå“ˆå“ˆå•Šå“ˆå“ˆå“ˆ', 'çŒ›ç”·èµ›åè¯­éŸ³å“ˆå“ˆå“ˆ', 'ä¸€è¯ºæŒºå‰å®³çš„å•Š', 'çˆ±æ€æŒ‡æŒ¥', 'æˆ‘çœŸçš„å¬åˆ°äº†å¼€æˆ‘', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'ä¸€è¯ºæ±Ÿè¥¿çš„å•Š', 'çˆ±æ€æŒ‡æŒ¥', 'å“ˆå“ˆå“ˆ', 'æ€äºº', 'çˆ±æ€ä¸»æŒ‡æŒ¥', 'çª!', 'ç¬‘æ­»', 'äº²äº²', 'æ‰“æ’ä½å‘¢!', 'å•Šå•Šå•Šè¯ºå´½', 'ä¸€è¯ºè¿˜æ˜¯é¡¶å•Š', 'ç»™æˆ‘æ€äºº', 'æ¼‚äº®', 'çˆ±æ€', 'å¤ªéªšäº†', 'æ€äººæ€äºº', 'ç»™æˆ‘æ­»', 'æ˜¯çš„æ˜¯çš„', 'æœˆå…‰?', 'æ²¡å¬æ¸…æ¥š', 'å¥½å¯çˆ±', 'æ·¦', 'ä¸€è¯ºå®è´', 'çŒ›ç”·', 'æ‰“qgç›¯ä½flyä¸è®©ä»–è¿›åœºå°±å¯ä»¥äº†', 'å“ˆå“ˆå“ˆ', 'åŒæŒ‡æŒ¥', 'è€å¹²çˆ¹ä¹±æ€', 'å°±å¬åˆ°äº†æ€äºº', 'bpä¸ºå•¥è¦æ”¾é²ç­å¤§å¸ˆ?è¿˜banå¼ é£', 'ä¸€è¯ºç‰›å£', 'è¿™ä¸ªè¾“å‡º...', 'ä¸€è¯ºç‰›é€¼', 'ç¬‘æ­»æˆ‘äº†', '???', 'ä¸ƒå¹´', 'å“ˆå“ˆå“ˆæ€ä¹ˆè¿™ä¹ˆå¥½ç¬‘', 'ç»™æˆ‘æ­»ç»™æˆ‘æ­»ç»™æˆ‘æ­»', 'æœç„¶æ˜¯æ€äººæ€äºº', 'å“ˆå“ˆå“ˆ', 'ç»™æˆ‘æ­»', 'è¿˜æœ‰ä¸€è¯º', 'æ±Ÿè¥¿ä»”', 'å—¯å—¯!', 'æ€äººæ€äºº,éšä¾¿æ', 'æ€äºº!', 'æœ‰ç¬‘å½±çš„å£°éŸ³', 'ç»™æˆ‘æ­»,å“ˆå“ˆå“ˆ', 'ä¸€è¯ºæ±Ÿè¥¿äººå—', 'å“ˆå“ˆå“ˆå¥½å¯çˆ±', 'å¥½å¯çˆ±', 'ç»™çˆ·æ­»å“ˆå“ˆå“ˆ', 'ä¸ƒå¹´', 'ä¸ƒå¹´', 'çˆ±æ€å¤šä¸€ç‚¹', 'ç¬‘å½±è´Ÿè´£å–Šæ€äºº', 'è¢«è™å“­äº†,è¯·æ±‚å¤§ä½¬æ”¯æ´#æŒ‘æˆ˜666#', 'ä¸€è¯º', 'ç»™ğŸ‘´æ­»', 'å“ˆå“ˆå“ˆ', 'å¥½é›„æµ‘', 'åŒæŒ‡æŒ¥ç¨³çš„ä¸€æ‰¹', 'å“ˆå“ˆå“ˆ', 'çˆ±æ€ä¸»æŒ‡æŒ¥', 'ä¸»è¦æ˜¯çˆ±æ€', 'å¤ªé€—äº†å“ˆå“ˆå“ˆ', 'ç¬‘å½±å£°éŸ³å¥½åƒä¸æ˜¯è¿™æ ·çš„å•Š', 'å˜»å˜»', 'ä¸€è¯ºå¼Ÿå¼Ÿå¥½å¯çˆ±', 'éšä¾¿g', 'å“ˆå“ˆå“ˆ', ':ç¬‘å½±æ²¡è¯´è¯', 'äº²äº²ä¸€è¯º', 'æˆ‘å¬åˆ°äº†ä¸€è¯ºæˆ‘è¦æ€', 'ä¸€è¯ºçš„æ€äºº', 'ä¸€ä¸ªé™Œç”Ÿç”·å­çš„æœ‰ç£æ€§çš„å£°éŸ³', 'ç¬‘çš„å¥½å‚»å•Š', 'æ€äººæ€äººæ€äºº', 'æ€äººæ€äºº', 'ä¸ºå•¥ä¸ç»™ä¸€è¯ºå‡ºä¸ªfmvp', 'æ€ä»–å¥¥åˆ©ç»™', 'ç»™æˆ‘æ€äºº', 'ç¬¬äºŒæŠŠè°mvp', 'å“ˆå“ˆå“ˆ', 'å’Œæ‰“æ’ä½æ²¡å•¥åŒºåˆ«å“ˆå“ˆå“ˆ', 'å°±çˆ±æ€å§', 'ä¸ƒå¹´', 'æ²¡æœ‰é˜‘å°¾çš„ç”·äºº43', 'å•Šï½ç»™æˆ‘æ­»ï½', 'çˆ±æ€å£°éŸ³æ¯”è¾ƒå¤§', 'ä¸æ˜¯ä¸€è¯º', 'ä¸€è¯ºæ€äººæ€äºº', '???', 'å°çœ¼ç›å•çœ¼çš®å¤ªä¸‘äº†', 'ä¸»æ’­æ˜¯çœŸçš„é¡¶', 'æ€æ€æ€', 'agç‰›é€¼', 'æ€äºº!', 'ç¬‘å½±å£°éŸ³å¾ˆé‡', 'èµµäº‘çœ‹ä½äº†å…³ç¾½é‚£æ˜¯å“ªä¸ªçŒ›ç”·åœ¨å¼å“ˆå“ˆå“ˆ', '6.6', 'å¯çˆ±', 'ä¸æ˜¯ä¸€è¯º', 'ä¹±ä¸ƒå…«ç³Ÿ...', 'ä½ ç»™æˆ‘æ­»,åƒæ‰“ç‹—ä¸€æ ·', 'ç»™æˆ‘æ­»!å“ˆå“ˆå“ˆ', '21stæ˜¯ä»€ä¹ˆ', 'ä¸æ˜¯ä¸€è¯º', 'çˆ±æ€ä¸ƒå¹´å§', 'ä¸æ˜¯ä¸€è¯º', 'çˆ±æ€ä¸»æŒ‡æŒ¥', 'å’¦é¢é¢é¹…é¹…é¹…é¹…é¹…é¹…é¹…', 'é‚£ä¸ªè…¿', 'å“ªä¸ªæ˜¯ç¬‘å½±çš„å£°éŸ³', 'ç¬‘å½±å°‘', '6.6è¯´è¯æ²¡?', 'æ‹–ç±³åˆèººä¸‹äº†', 'äº²äº²ä¸€è¯º', 'å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'ä¸æ˜¯ä¸€è¯ºå­', '7å¹´', 'å°å½±', 'ä¸ƒå¹´å§', 'æ„Ÿè§‰ä»–ä»¬å£°éŸ³å¥½æç¬‘', 'å°„æ‰‹å‡ºèº«ä¸æ‰“å°„æ‰‹å°±é†‰äº†', 'ç»ˆæé«˜æ‰‹å‡ºæ¥çš„.agç”¨äº†ä¸¤ä¸ª éƒ½ç‰›é€¼', 'æˆ‘åœ¨#æŒ‘æˆ˜666#çš„æœ€å¥½æˆç»©æ˜¯6.75ç§’,ç‚¹å‡»å¼¹å¹•ç«‹å³æŒ‘æˆ˜ã€‰ã€‰', 'é‚£æ˜¯ä¸ƒå¹´', 'çŒ›ç”·æ€’å¼', 'æ€æ€æ€', 'æˆ‘æ€ä¹ˆæ„Ÿè§‰æ˜¯æœˆå…‰', '5ç§’çœŸç”·äººçš„æ—¶ä»£å·²ç»è¿‡å»,åœ¨è¿™ä¸ªç›´æ’­é—´å°±æ¥#æŒ‘æˆ˜666#', 'æ€äººæ€äºº', 'è¿˜èƒ½è¿™ä¹ˆå¬', 'ä¸€è¯ºçš„æ€äºº', 'æ€äºº', 'å°±é‚£ä¸ªçŒ›ç”·æ€’å¼', 'å…¨ç¨‹æ€æ€æ€', 'â¤â¤â¤', 'h', 'å¤§é¹…å’Œvgè°å‰å®³', 'æ˜¯ä¸€è¯º', 'æ±Ÿè¥¿ä»”,å“ˆå“ˆå“ˆ', 'å“ˆå“ˆå“ˆ', 'ä¸€è¯ºæ˜¯å…¬é¸­', 'å…«ç§’å¤§æ‹›å…«ç§’å¤§æ‹›', '?...å¬ä¸ªé”¤å­', 'çˆ±æ€', '???', 'å¹²!', 'æ˜¯æœ‰ç¬‘å½±çš„å£°éŸ³', 'é›„æµ‘çš„å£°éŸ³', 'å¤§ç‚¹å£°éŸ³', 'ä¸æ˜¯', 'æ­»', 'ä¸»æŒ‡æŒ¥çˆ±æ€', 'å£ç½©', 'æˆ‘å¬æˆé¡¹ç¾½çš„å£°éŸ³äº†?', 'åŒæŒ‡æŒ¥nb', 'ä¸€è¯ºä¸€ç›´è¯´ç»™æˆ‘æ€äºº', 'é¡¹ç¾½?', 'éƒ­è€å¸ˆ  æ±‚æ±‚ä½ æ‹¯æ•‘ä¸€ä¸‹qgå§[æ‰“call]', 'æ˜¯çˆ±æ€å•¦', 'ä¸ƒå¹´ä½ ä¹Ÿæ²¡å¬è¿‡å§', 'è€å¹²çˆ¹ä¹±æ€', '7å¹´', 'ä¸æ˜¯ä¸€è¯º', 'æ€äººæ€äººæ€äºº', 'ä¸åƒä¸€è¯ºçš„', 'å¯çˆ±', 'ç»™æˆ‘æ­»', 'ä¸ƒå¹´çš„', 'çˆ±æ€æ˜¯æŒ‡æŒ¥', 'ç»™æˆ‘æ­»', 'ä¸€è¯ºè¿˜å¥½', 'å”‰,å¤ªå¤±æœ›äº†', 'ç¬‘å½±å¼ è‰¯è¯´å‡ ç§’å¤§æ‹›', 'ä¸€è¯ºçš„å£°éŸ³å°±æ˜¯ ä¸€ç›´ç ´éŸ³', 'ä¸ƒå¹´å‘¢', 'è‡ªå¸¦æ··å“', 'ä¸€è¯ºè·Ÿè‰¾æ–¯æŒ‡æŒ¥', 'çµå„¿è¿™ä¸ªè…¿å¯ä»¥', 'æ‹–ç±³?', 'ä¸€è¯ºè¯´çš„æ€äºº', 'çˆ±æ€æŒ‡æŒ¥', 'ä¸€è¯ºè¯´æ€äºº', 'ä¸€è¯ºå°±è¯´äº†æ€äºº', 'ç°åœ¨qgçš„æŒ‡æŒ¥æ˜¯è®¸è¯ºè¿˜æ˜¯æœ«å°†?æ„Ÿè§‰æœ‰ç‚¹æ‡µ,ä¸çŸ¥é“è¯¥å¹²å˜›,å¾ˆè¢«åŠ¨', 'ä¸€è¯ºåƒç«é”…å—“å­å˜ç²—äº†', 'å•Šå“ˆå“ˆå“ˆ,å¥½å¯çˆ±', 'ä¸æ˜¯ä¸€è¯º', 'ä¸€è¯ºæ±Ÿè¥¿å“ªçš„?', 'å“ˆå“ˆå“ˆ', 'ä¸€è¯ºçƒŸå—“å“ˆå“ˆå“ˆ', 'ä¸æ˜¯', 'è…¿æ¥äº†', 'ä¸ƒå¹´', 'ä¸æ˜¯ä¸€è¯º', 'è¿™è°é¡¶å¾—ä½å•Š', 'æ‹–ç±³ç¬‘æ­»äºº', 'ä¸æ˜¯ä¸€è¯º', 'é‚ªé­…ä¸€ç¬‘', 'å…ˆæ€äºº', 'ä¸€è¯ºå£°éŸ³å“ªæœ‰è¿™ä¹ˆç²—ä½ ä»¬è¯´å•¥å‘¢', 'æ€äºº!', 'ä¸ƒå¹´çœŸå·¥å…·äºº', 'ä¸æ˜¯', 'æ€ä¹ˆæ²¡ä¸Šå† å†›é˜µå®¹å•Š?', 'æˆ‘æ„Ÿè§‰flyå¥½ä¹…æ²¡æ‰“äº†æœ‰ç‚¹ä¸åœ¨çŠ¶æ€', 'æ­»', 'qgç°åœ¨è°æŒ‡æŒ¥', 'å…ˆæ€äººæ€äºº', 'ä¸€è¯ºï¼šæ€äººæ€äºº', 'ä¸ƒå¹´', 'åˆºç—›å–œå“ˆå“ˆå“ˆæ¬¢ç©æœ€è´µçš„çš®è‚¤', 'ä¸æ˜¯ä¸€è¯º', 'è¿™å•¥å•Š', '3ï¼0å¸¦èµ°', 'å¥½', 'ä¸€è¯º @aunfrozenï¼šç¬¬äºŒæŠŠè°mvp', 'ä¸ƒå¹´?', 'ä»Šå¤©çŠ¶æ€ä¸é”™å‘€', 'çˆ½,å“ˆå“ˆå“ˆ.', 'çœŸ:æ¯’å¥¶', 'åˆæœ‰æ¤…å­äº†?', 'ä¸ƒå¹´', '666', 'è®°å¾—æ“¦å˜´', 'ä¸€è¯ºå¥¶å¥¶çš„', 'æ¶!', 'å£ç½©åŒ…ä¸ä½æ‰˜ç±³çš„ä¸‹å·´', 'ä¸æ˜¯ä¸€è¯º', 'ä¸è®¸', 'ä¸å¥½', 'ä¸æ˜¯ä¸€è¯ºå£°éŸ³', 'ä¸æ˜¯ä¸€è¯ºå¼Ÿå¼Ÿ', 'ä¸€è¯ºå¼Ÿå¼Ÿï¼šç»™æˆ‘!æ­»', '666', 'çˆ±æ€ä¸»æŒ‡æŒ¥', '6+1=7', '6.6', 'è¿™æ ·æ‰“çš„æ—¶å€™æ•™ç»ƒå¯ä»¥åœ¨æ—è¾¹æ”¯æ‹›å˜›', '666', 'ä¸ƒå¹´ ä¸ƒå¹´è¯æŒºå¤šçš„', 'æˆ‘ä¹Ÿæ˜¯', 'ç¬‘å½±å£°éŸ³å¾ˆç»†çš„,åº”è¯¥æ˜¯ä¸ƒå¹´', 'ä¸å…è®¸', 'ä¸æ˜¯ä¸€è¯º', 'ä¸ƒå¹´çš„', 'ä¸Šæ¬¡æ²¡770çœŸçš„çœŸçš„qgæ‹¿ä¸äº†å† å†›', 'ä¸è¡Œ', 'å’‹ä¸ç»™ä¸€è¯ºå‡ºä¸€ä¸ªfmvpçš®è‚¤', 'å¥½', 'ç»™æˆ‘æ­»', 'ä¸æ˜¯ä¸€è¯º', 'ä¸è¡Œ', 'çŒªå“¼å¤´å‘å¤šäº†?', 'å°±è¿™ä¸‰ä¸ªäºº', 'ä¸å…è®¸', 'å”‰', 'æ‹–ç±³å’Œçµå„¿æ¢äº†ä¸ªä½ç½®', 'ä¹‹å‰è¿˜ä¸æ˜¯è¯´agä¸‡å¹´è€äºŒ', '666', 'é‡‡è®¿è¯´äº†çˆ±æ€æŒ‡æŒ¥', '666', '666', 'å›°äº†ç´¯äº†,å°±æ¥ä¸€æŠŠç´§å¼ åˆºæ¿€çš„#æŒ‘æˆ˜666#,ä¸€å±€æç¥é†’è„‘,ä¸¤å±€æ°¸ä¸ç–²åŠ³!', 'kjfjds', 'è¯´æ€äººçš„æ˜¯ä¸€è¯º', 'åªå¬åˆ°äº†æ€äººæ€äºº', 'æ€äººè‚¯å®šæ˜¯ä¸€è¯ºå–Šçš„', 'ä¸è®¸', 'ä¸æ˜¯ä¸€è¯º', '666', 'ç»“ç®—', 'ä¸è¡Œ', '666', 'å»å§å»å§', '666', 'ä¸€è¯ºå°±åªåœ¨å–Šæ€äºº', 'æ€æ€æ€,ç»™æˆ‘æ­»', 'ä¸è¡Œ', 'ä¸€è¯ºè¯´æ€äºº', 'ä¸€è¯ºå£°éŸ³çš„è¾¨è¯†åº¦æŒºå¥½çš„', '666', 'c', 'å“ˆå“ˆå“ˆ', '666', 'ä¸å¥½', 'ä¸æ˜¯ä¸€è¯º', '666', 'æ˜¯ä¸æ˜¯6å“¥è¯´çš„è®©æˆ‘æ­»?', '666', '666', 'ä¸€è¯ºæ˜¯å…¬é¸­å—“!', 'ä¸å¥½', '666', 'å†²å†²å†²', 'ä¸æ˜¯ä¸€è¯º', 'å“ˆå“ˆå“ˆ']
#
#
#avg,pos_avg,pos_pro,neg_avg,neg_pos=sentiment_fragment(test_list)
#print(avg,pos_avg,pos_pro,neg_avg,neg_pos)    


segmentor.release()    
    